## 第八章 虚拟机字节码执行引擎

### 8.1 运行时栈帧结构

1. 栈帧是用于支持虚拟机进行**方法调用**和**方法执行**的数据结构。
2. 栈帧是虚拟机运行时数据区中的**虚拟机栈**的栈元素。
3. 栈帧存储了**局部变量表**，**操作数栈**，**动态连接**和**方法返回地址**等信息。
4. 每一个方法从调用开始到执行完成，对应一个栈帧在虚拟机栈里**入栈到出栈**。
5. 在编译代码的时候，栈帧需要多大的局部变量表和多深的操作数栈都**已经完全确定**了，并写入**方法表的Code属性**中。所以栈帧需要分配多少内存，**不受程序运行期间变量影响**。
6. 一个线程中，方法调用链可能很长，有多个方法都处于执行状态（意味着虚拟机栈中有多个栈帧）。对于执行引擎来说，只有**栈顶的栈帧**是有效的，叫做**当前栈帧（Current Stack Frame）**，对应的方法叫**当前方法（Current Method）**。

#### 8.1.1 局部变量表
#### 8.1.2 操作数栈
#### 8.1.3 动态连接
#### 8.1.4 方法返回地址
#### 8.1.5 附加信息
### 8.2 方法调用
#### 8.2.1 解析
#### 8.2.2 分派
### 8.3 基于栈的字节码解释执行引擎
#### 8.3.1 解释执行
#### 8.3.2 基于栈的指令集与基于寄存器的指令集
#### 8.3.3 基于栈的解释器执行过程